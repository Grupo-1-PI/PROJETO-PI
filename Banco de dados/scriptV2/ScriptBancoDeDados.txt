-- Criação do esquema
CREATE DATABASE IF NOT EXISTS `+vidaz`;
USE `+vidaz`;

-- Tabela `Campanha`
CREATE TABLE IF NOT EXISTS `Campanha` (
  `idEvento` INT NOT NULL,
  `data` DATETIME NULL,
  PRIMARY KEY (`idEvento`)
);

-- Tabela `BancoDeSangue`
CREATE TABLE IF NOT EXISTS `BancoDeSangue` (
  `idBancoDeSangue` INT AUTO_INCREMENT,
  `NomeBancoDeSangue` VARCHAR(45),
  `fkEventoBancoDeSangue` INT,
  PRIMARY KEY (`idBancoDeSangue`),
  INDEX `fk_BancoDeSangue_Evento1_idx` (`fkEventoBancoDeSangue` ASC),
  CONSTRAINT `fk_BancoDeSangue_Evento1`
    FOREIGN KEY (`fkEventoBancoDeSangue`)
    REFERENCES `Campanha` (`idEvento`)
);

-- Tabela `Endereco`
CREATE TABLE IF NOT EXISTS `Endereco` (
  `idEnderecoDoador` INT AUTO_INCREMENT,
  `cep` CHAR(8),
  `RUA` VARCHAR(45),
  `NUMERO` CHAR(8),
  `BAIRRO` VARCHAR(45),
  `fkBancoDeSangue` INT NOT NULL,
  `fkEvento` INT NOT NULL,
  PRIMARY KEY (`idEnderecoDoador`),
  INDEX `fk_Endereco_Ong1_idx` (`fkBancoDeSangue` ASC),
  INDEX `fk_Endereco_Evento1_idx` (`fkEvento` ASC),
  CONSTRAINT `fk_Endereco_Ong1`
    FOREIGN KEY (`fkBancoDeSangue`)
    REFERENCES `BancoDeSangue` (`idBancoDeSangue`),
  CONSTRAINT `fk_Endereco_Evento1`
    FOREIGN KEY (`fkEvento`)
    REFERENCES `Campanha` (`idEvento`)
);

-- Tabela `Usuario`
CREATE TABLE IF NOT EXISTS `Usuario` (
  `idUsuario` INT AUTO_INCREMENT,
  `nomeDoador` VARCHAR(45),
  `dataNascimento` DATE,
  `emailDoador` VARCHAR(45),
  `sexo` TINYINT,
  `senha` VARCHAR(45),
  `fkEvento` INT NOT NULL,
  `fkEndereco` INT NOT NULL,
  PRIMARY KEY (`idUsuario`),
  INDEX `fk_Usuario_Evento1_idx` (`fkEvento` ASC),
  INDEX `fk_Usuario_Endereco1_idx` (`fkEndereco` ASC),
  CONSTRAINT `fk_Usuario_Evento1`
    FOREIGN KEY (`fkEvento`)
    REFERENCES `Campanha` (`idEvento`),
  CONSTRAINT `fk_Usuario_Endereco1`
    FOREIGN KEY (`fkEndereco`)
    REFERENCES `Endereco` (`idEnderecoDoador`)
);

-- Tabela `Contato`
CREATE TABLE IF NOT EXISTS `Contato` (
  `idContato` INT AUTO_INCREMENT,
  `telefone` INT,
  `celular` INT,
  `fkContatoDoador` INT,
  PRIMARY KEY (`idContato`)
);
